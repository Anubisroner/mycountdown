<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>MyCountdown - Admin</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://kit.fontawesome.com/a0a392fad6.js" crossorigin="anonymous"></script>
</head>
<body>

  <!-- Header avec filtres + actions -->
  <header>
    <div class="left">
      <i class="fas fa-home" id="home"></i>
    </div>
    <div class="center filters">
      <span class="filter-btn" data-type="FILM">FILMS</span>
      <span class="filter-btn" data-type="SERIE">SÃ‰RIES</span>
      <span class="filter-btn" data-type="JEU">JEUX</span>
      <span class="filter-btn" data-type="UNKNOWN_DATE">DATE INCONNUE</span>
      <span class="filter-btn" data-type="ALREADY_RELEASED">DÃ‰JÃ€ SORTIE</span>
    </div>
    <div class="right">
      <i class="fas fa-question-circle" id="help"></i>
      <i class="fas fa-search" id="search-icon" title="Rechercher"></i>
      <i class="fas fa-plus" id="add-btn" title="Ajouter un contenu" style="display: none;"></i>
      <i class="fas fa-bell" id="notif-btn" title="Notifications" style="display: none;"></i>
      <i class="fas fa-user-circle" id="profile-btn" title="Profil" style="display: none;"></i>
      <i class="fas fa-key" id="admin-btn" title="Admin" style="display: none;"></i>
      <i class="fas fa-right-to-bracket" id="login"></i>
    </div>
  </header>

  <!-- Barre de recherche globale -->
  <div id="global-search-container" style="display: none;">
    <input type="text" id="global-search" placeholder="Rechercher un contenu..." />
  </div>

  <!-- Filtres plateforme (si type = JEU) -->
  <div id="platform-filters" class="filters subfilters" style="display: none;">
    <span class="platform-btn" data-platform="PC">PC</span>
    <span class="platform-btn" data-platform="XBOX">XBOX</span>
    <span class="platform-btn" data-platform="PS5">PS5</span>
    <span class="platform-btn" data-platform="SWITCH">SWITCH</span>
  </div>

  <!-- Modale aide / tutoriel -->
  <div class="modal-background" id="modal-help" style="display: none;">
    <div class="modal">
      <span class="close" onclick="closeModal('modal-help')">Ã—</span>
      <p>
        ðŸ‘‹ Bienvenue sur <strong>MyCountdown</strong> !<br><br>

        âœ… Une fois <strong>inscrit et connectÃ©</strong> :<br>
        - Tu peux <strong>ajouter tes propres contenus</strong> Ã  surveiller (jeux, films, sÃ©ries)<br>
        - Clique sur âž• pour ajouter un Ã©lÃ©ment<br><br>

        ðŸ”” Tu veux Ãªtre averti quand un contenu sort ?<br>
        - Clique sur la <strong>cloche</strong> pour t'inscrire Ã  la <strong>newsletter</strong><br>
        - Tu recevras une alerte Ã  chaque sortie !<br><br>

        ðŸ“… Un compte Ã  rebours est affichÃ© pour chaque date connue<br>
        ðŸ“­ Les contenus sans date ou dÃ©jÃ  sortis ont des filtres dÃ©diÃ©s<br><br>

        Bonne navigation ! ðŸš€
      </p>
    </div>
  </div>

  <!-- Modale ajout de contenu -->
  <div class="modal-background" id="modal-add" style="display: none;">
    <div class="modal">
      <span class="close" onclick="closeModal('modal-add')">Ã—</span>
      <h3>Ajouter un contenu</h3>

      <input type="text" id="add-name" placeholder="Nom" maxlength="43">

      <select id="add-type" onchange="handleTypeChange()">
        <option value="">-- Type --</option>
        <option value="FILM">FILM</option>
        <option value="SERIE">SÃ‰RIE</option>
        <option value="JEU">JEU</option>
      </select>

      <div id="saison-field" style="display: none;">
        <input type="number" id="add-season" placeholder="Saison">
      </div>

      <div id="platform-field" style="display: none;">
        <select id="add-platform">
          <option value="">-- Plateforme --</option>
          <option value="PC">PC</option>
          <option value="XBOX">XBOX</option>
          <option value="PS5">PS5</option>
          <option value="SWITCH">SWITCH</option>
        </select>
      </div>

      <input type="text" id="add-cover" placeholder="Lien jaquette">
      <input type="text" id="add-url" placeholder="URL (Steam, JVC, AlloCinÃ©...)">
      <input type="date" id="add-date">
      <button id="add-submit-btn" onclick="submitContent()">Ajouter</button>
      <p id="add-msg"></p>
    </div>
  </div>

  <!-- Zone admin : recherche et filtres utilisateurs -->
  <h2>Utilisateurs</h2>
  <input type="text" id="user-search" placeholder="Rechercher un utilisateur...">
  <select id="user-role-filter">
    <option value="all">Tous les utilisateurs</option>
    <option value="admins">Administrateurs</option>
    <option value="users">Utilisateurs</option>
  </select>

  <!-- Liste dynamique des utilisateurs (cartes) -->
  <div id="user-list" class="admin-card-container"></div>

  <!-- Modale suppression utilisateur -->
  <div class="modal-background" id="modal-delete-user" style="display: none;">
    <div class="modal small">
      <span class="close" onclick="closeModal('modal-delete-user')">Ã—</span>
      <p id="delete-user-text">Supprimer cet utilisateur ?</p>
      <button onclick="deleteUser('user')">Supprimer l'utilisateur</button>
      <button onclick="deleteUser('full')">Utilisateur + ajouts</button>
      <button onclick="deleteUser('releases')">Ajouts uniquement</button>
    </div>
  </div>

  <!-- Modale newsletter -->
  <div class="modal-background" id="modal-notif">
    <div class="modal">
      <span class="close" onclick="closeModal('modal-notif')">Ã—</span>
      <h2 style="color: black;">Newsletter</h2>

      <p id="notif-email-info" class="notif-info hidden"></p>

      <div id="notif-inscription">
        <input type="email" id="notif-email" placeholder="Entrez votre email">
        <button onclick="submitNotification()">S'inscrire</button>
      </div>

      <div id="notif-desinscription" style="display: none;">
        <p id="notif-email-saved-container">
          Adresse enregistrÃ©e <span id="notif-email-saved"></span>
        </p>
        <button onclick="unsubscribeNotification()">Se dÃ©sinscrire</button>
      </div>

      <p id="notif-msg"></p>
    </div>
  </div>

  <!-- JS global + spÃ©cifique admin -->
  <script src="script.js"></script>
  <script src="admin.js"></script>
</body>
</html>
